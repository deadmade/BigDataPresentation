<svg xmlns="http://www.w3.org/2000/svg" width="1600" height="900" viewBox="0 0 1600 900" role="img" aria-label="Kafka retention model: time-based retention and log compaction">
  <defs>
    <style>
      .bg { fill: #1e1e2e; }
      .panel { fill: #313244; rx: 18; }
      .title { fill: #cdd6f4; font: 700 42px Arial, sans-serif; }
      .subtitle { fill: #a6adc8; font: 600 28px Arial, sans-serif; }
      .axis { stroke: #bac2de; stroke-width: 4; }
      .text { fill: #cdd6f4; font: 500 24px Arial, sans-serif; }
      .event { fill: #89b4fa; }
      .event-old { fill: #f38ba8; }
      .event-new { fill: #a6e3a1; }
      .key-a { fill: #f9e2af; }
      .key-b { fill: #89dceb; }
      .deleted { fill: #f38ba8; }
    </style>
  </defs>

  <rect class="bg" x="0" y="0" width="1600" height="900" />
  <text class="title" x="80" y="86">Kafka Retention: Time-Based vs. Log Compaction</text>

  <rect class="panel" x="70" y="130" width="700" height="700" />
  <text class="subtitle" x="110" y="190">Time-Based / Size-Based Retention</text>
  <line class="axis" x1="130" y1="730" x2="710" y2="730" />
  <polygon points="710,730 690,718 690,742" fill="#bac2de" />
  <text class="text" x="130" y="775">Zeit</text>

  <rect class="event-old" x="160" y="610" width="70" height="100" />
  <rect class="event-old" x="250" y="570" width="70" height="140" />
  <rect class="event" x="340" y="540" width="70" height="170" />
  <rect class="event" x="430" y="510" width="70" height="200" />
  <rect class="event-new" x="520" y="470" width="70" height="240" />
  <rect class="event-new" x="610" y="430" width="70" height="280" />

  <line x1="305" y1="250" x2="305" y2="710" stroke="#f38ba8" stroke-width="4" stroke-dasharray="10 10" />
  <text class="text" x="130" y="250">Löschgrenze</text>
  <text class="text" x="135" y="305">alte Segmente entfernt</text>

  <rect class="panel" x="830" y="130" width="700" height="700" />
  <text class="subtitle" x="870" y="190">Log Compaction</text>
  <line class="axis" x1="890" y1="730" x2="1470" y2="730" />
  <polygon points="1470,730 1450,718 1450,742" fill="#bac2de" />
  <text class="text" x="890" y="775">Offset / Zeit</text>

  <rect class="key-a" x="920" y="600" width="80" height="90" />
  <text class="text" x="944" y="655">A1</text>
  <rect class="key-b" x="1020" y="560" width="80" height="130" />
  <text class="text" x="1044" y="635">B1</text>
  <rect class="key-a" x="1120" y="520" width="80" height="170" />
  <text class="text" x="1144" y="615">A2</text>
  <rect class="key-b" x="1220" y="480" width="80" height="210" />
  <text class="text" x="1244" y="595">B2</text>
  <rect class="key-a" x="1320" y="440" width="80" height="250" />
  <text class="text" x="1344" y="575">A3</text>

  <line x1="960" y1="340" x2="1160" y2="340" stroke="#f38ba8" stroke-width="4" marker-end="url(#arrow)" />
  <line x1="1060" y1="300" x2="1260" y2="300" stroke="#f38ba8" stroke-width="4" marker-end="url(#arrow)" />
  <line x1="1160" y1="260" x2="1360" y2="260" stroke="#a6e3a1" stroke-width="4" marker-end="url(#arrow)" />
  <text class="text" x="905" y="350">ältere Werte desselben Keys werden verworfen</text>
  <text class="text" x="905" y="390">neuester Zustand pro Key bleibt erhalten</text>

  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
      <polygon points="0,0 10,4 0,8" fill="#f38ba8" />
    </marker>
  </defs>
</svg>
